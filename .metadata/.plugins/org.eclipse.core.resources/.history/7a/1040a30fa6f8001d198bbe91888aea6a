package ArtApp.TestComponents;

import java.time.Duration;
import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.StaleElementReferenceException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeOptions;
import org.openqa.selenium.edge.EdgeDriver;
import org.openqa.selenium.edge.EdgeOptions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

public class BaseClass {

	public WebDriver InitializeBrowser() {

		// System.setProperty("webdriver.chrome.driver",
		// "C:\\Users\\sra\\Downloads\\chromedriver_win32 (1)\\chromedriver.exe");
		// ChromeOptions options = new ChromeOptions();

		System.setProperty("webdriver.edge.driver",
				"C:\\Users\\sra\\Downloads\\edgedriver_win64 (5)\\msedgedriver.exe");
		EdgeOptions options = new EdgeOptions();

		options.addArguments("--remote-allow-origins=*");

		// WebDriver driver = new ChromeDriver(options);
		WebDriver driver = new EdgeDriver(options);
		driver.manage().window().maximize();
		return driver;

	}

	public void CountRowsPerPages(WebDriver driver) throws InterruptedException {
		WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(100));
		wait.until(ExpectedConditions.elementToBeClickable(By.xpath("(//a)[2]"))).click();

		wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(".font-weight600")));
		Thread.sleep(3000);
		String artworkCountText = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(".font-weight600")))
				.getText();
		wait.until(ExpectedConditions.not(ExpectedConditions.textToBe(By.cssSelector(".font-weight600"), "0")));

		String artworkCount = artworkCountText.split(" ")[0];

		int artworkCountNumber = Integer.parseInt(artworkCount);
		System.out.println("Artwork count is " + artworkCountNumber);

//        WebElement pagination = driver.findElement(By.xpath("//ul[@class='pagination']"));

		WebElement ul = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(".ant-pagination")));

		java.util.List<WebElement> pages = ul.findElements(By.tagName("li"));

		// List<WebElement> pages = ul.findElements(By.tagName("li"));

		int NumberofPages = 0;
		if (artworkCountNumber % 10 == 0) {

			NumberofPages = artworkCountNumber / 10;
		} else {

			NumberofPages = artworkCountNumber / 10 + 1;
		}
		System.out.println("Number of pages are " + NumberofPages);
		int NumberofArtworksPerPage = 10;
		String pageno;

		// *************************************************************************************

		/*
		 * for (WebElement pageLink : pages) {
		 * 
		 * wait.until(ExpectedConditions.elementToBeClickable(By.tagName("a")));
		 * pageLink.findElement(By.tagName("a")).click();
		 * 
		 * 
		 * ul = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(
		 * ".ant-pagination")));
		 * 
		 * // pagination = driver.findElement(By.xpath("//ul[@class='pagination']"));
		 * 
		 * // Re-find the page links within the updated pagination ul pages =
		 * ul.findElements(By.tagName("li")); // pageLinks =
		 * pagination.findElements(By.tagName("li")); }
		 */

		// *************************************************************************************

		pages.get(2).click();
		Thread.sleep(5000);
		System.out.println(
				"After clicking now number of pages are " + NumberofPages + " and no of pages are " + pages.size());

		for (int i = 2; i <= NumberofPages; i++) {
			ul = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(".ant-pagination")));
			pages = ul.findElements(By.tagName("li"));
			String PageNo = pages.get(i).getText();
			System.out.println("Pages size is " + pages.size() + " and 2nd last item is " + PageNo);
			wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(".ant-pagination")));
			Thread.sleep(2000); //
			//wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector("li[title='Next Page']"))).click();
			pages.get(i).click();

			
			/*
			 * if (i == 4) { pages2.get(i - 1).click(); } if (i > 4) { pages2.get(i -
			 * 2).click(); } else { pages2.get(i).click(); }
			 */

			NumberofArtworksPerPage = NumberofArtworksPerPage + 10;
		}

		// *************************************************************************************
		System.out.println("Number of artworks per pages are " + NumberofArtworksPerPage);
	}

}